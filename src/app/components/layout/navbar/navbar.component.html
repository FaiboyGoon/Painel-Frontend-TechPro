<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <a class="navbar-brand" href="principal/dashboard">TechPro</a>

    <div
      class="collapse navbar-collapse"
      id="navbarSupportedContent"
      mdbCollapse
      #basicNavbar="mdbCollapse"
    >
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="principal/itens">Itens</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="principal/transacoes">Transações</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="principal/extratos">Extratos</a>
        </li>
        <li class="nav-item" *ngIf="isDemandante()">
          <a class="nav-link" href="principal/usuarios/new">Cadastrar Usuario</a>
        </li>
        <li class="nav-item" *ngIf="isDemandante()">
          <a class="nav-link" href="principal/cadastros">Cadastros</a>
        </li>
      </ul>
      <ul class="navbar-nav d-flex align-items-center">
        <!-- Profile-->
        <li class="nav-item position-relative">
          <!-- Avatar clicável -->
          <div 
            class="user-avatar" 
            (click)="toggleDropdown()"
            [class.active]="dropdownAberto"
          >
            {{ getIniciais() }}
          </div>

          <div 
            class="profile-dropdown" 
            [class.show]="dropdownAberto"
            (click)="$event.stopPropagation()"
          >
            <div class="dropdown-header-custom">
              <div class="user-info">
                <div class="user-avatar-large">
                  {{ getIniciais() }}
                </div>
                <div class="user-details">
                  <strong>{{ getNomeUsuario() }}</strong>
                  <small>{{ getEmailUsuario() }}</small>
                  <span 
                    class="badge" 
                    [class.badge-primary]="isDemandante()" 
                    [class.badge-info]="!isDemandante()"
                  >
                    {{ getTipoUsuario() }}
                  </span>
                </div>
              </div>
            </div>

            <hr class="dropdown-divider-custom" />

            <!-- Opção de sair -->
            <div class="dropdown-item-custom" (click)="sair()">
              <i class="fas fa-sign-out-alt me-2"></i>
              Sair
            </div>
          </div>
          <div 
            class="dropdown-overlay" 
            *ngIf="dropdownAberto" 
            (click)="fecharDropdown()"
          ></div>
        </li>
      </ul>
    </div>
  </div>
</nav>